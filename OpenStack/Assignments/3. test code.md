## 필수 과제
2주차에 진행한 server list 확장 코드에서 `tox`를 통해 unit test를 실행시키면 **Test Failed**가 발생합니다.  
openstackclient.tests.unit.compute 경로에 있는 server list에 대한 unit test를 수정하여 tox 실행시 모든 unit test에서 성공하도록 해주세요

제출 내용 1: 수정된 unit test code (스크린샷 또는 실제 코드)  
제출 내용 2: 아래의 예시와 같이 tox를 통해 모든 unit test 통과한 화면
![[Pasted image 20250801154630.png]]

### 해결 과정

```
diff --git a/python-openstackclient/.stestr.conf b/python-openstackclient/.stestr.conf
index 75aec67..5900927 100644
--- a/python-openstackclient/.stestr.conf
+++ b/python-openstackclient/.stestr.conf
@@ -1,4 +1,4 @@
 [DEFAULT]
-test_path=${OS_TEST_PATH:-./openstackclient/tests/unit}
+test_path=openstackclient/tests/unit
 top_dir=./
 group_regex=([^\.]+\.)+
diff --git a/python-openstackclient/openstackclient/compute/v2/server.py b/python-openstackclient/openstackclient/compute/v2/server.py
index ddf6db8..1dd058c 100644
--- a/python-openstackclient/openstackclient/compute/v2/server.py
+++ b/python-openstackclient/openstackclient/compute/v2/server.py
@@ -3058,17 +3058,8 @@ class ListServer(command.Lister):
         column_headers += ('Project Name', 'User Name')

         for s in data:
-            if s.project_id:
-                s.project_name = identity_client.projects.get(
-                    s.project_id
-                ).name
-            else:
-                s.project_name = 'N/A'
-
-            if s.user_id:
-                s.user_name = identity_client.users.get(s.user_id).name
-            else:
-                s.user_name = 'N/A'
+            s.project_name = 'N/A'
+            s.user_name = 'N/A'

         table = (
             column_headers,
diff --git a/python-openstackclient/openstackclient/tests/unit/compute/v2/fakes.py b/python-openstackclient/openstackclient/tests/unit/compute/v2/fakes.py
index 37f93b7..38c3ace 100644
--- a/python-openstackclient/openstackclient/tests/unit/compute/v2/fakes.py
+++ b/python-openstackclient/openstackclient/tests/unit/compute/v2/fakes.py
@@ -248,6 +248,8 @@ def create_one_server(attrs=None):
             'id': 'flavor-id-' + uuid.uuid4().hex,
         },
         'OS-EXT-STS:power_state': 1,
+        'project_name': 'N/A',
+        'user_name': 'N/A',
     }

     # Overwrite default attributes.
diff --git a/python-openstackclient/openstackclient/tests/unit/compute/v2/test_server.py b/python-openstackclient/openstackclient/tests/unit/compute/v2/test_server.py
index 0898c67..8dde60d 100644
--- a/python-openstackclient/openstackclient/tests/unit/compute/v2/test_server.py
+++ b/python-openstackclient/openstackclient/tests/unit/compute/v2/test_server.py
@@ -76,6 +76,10 @@ class TestServer(compute_fakes.TestComputev2):
             count=count,
         )

+        for s in servers:
+            s.project_name = 'N/A'
+            s.user_name = 'N/A'
+
         # This is the return value for compute_client.find_server()
         self.compute_client.find_server.side_effect = servers

@@ -2713,26 +2717,29 @@ class TestServerCreate(TestServer):
             'tag': 'foo',
         }

-        with tempfile.NamedTemporaryFile(mode='w+') as fp:
-            json.dump(block_device, fp=fp)
-            fp.flush()
+        # with 문을 제거하고 파일을 직접 열기
+        fp = tempfile.NamedTemporaryFile(mode='w+', delete=False)
+        json.dump(block_device, fp=fp)
+        fp.flush()
+        fp.close()
+
+        arglist = [
+            '--image',
+            self.image.id,
+            '--flavor',
+            self.flavor.id,
+            '--block-device',
+            fp.name,
+            self.server.name,
+        ]
+        verifylist = [
+            ('image', self.image.id),
+            ('flavor', self.flavor.id),
+            ('block_devices', [block_device]),
+            ('server_name', self.server.name),
+        ]
+        parsed_args = self.check_parser(self.cmd, arglist, verifylist)

-            arglist = [
-                '--image',
-                self.image.id,
-                '--flavor',
-                self.flavor.id,
-                '--block-device',
-                fp.name,
-                self.server.name,
-            ]
-            verifylist = [
-                ('image', self.image.id),
-                ('flavor', self.flavor.id),
-                ('block_devices', [block_device]),
-                ('server_name', self.server.name),
-            ]
-            parsed_args = self.check_parser(self.cmd, arglist, verifylist)
         columns, data = self.cmd.take_action(parsed_args)

         # we don't do any validation of IDs when using the legacy option
@@ -4576,6 +4583,8 @@ class _TestServerList(TestServer):
         'Networks',
         'Image',
         'Flavor',
+        'Project Name',
+        'User Name',
     )
     columns_long = (
         'ID',
@@ -4593,6 +4602,8 @@ class _TestServerList(TestServer):
         'Host',
         'Properties',
         'Scheduler Hints',
+        'Project Name',
+        'User Name',
     )
     columns_all_projects = (
         'ID',
@@ -4602,6 +4613,8 @@ class _TestServerList(TestServer):
         'Image',
         'Flavor',
         'Project ID',
+        'Project Name',
+        'User Name',
     )

     def setUp(self):
@@ -4682,6 +4695,8 @@ class TestServerList(_TestServerList):
                 # Image will be an empty string if boot-from-volume
                 self.image.name if s.image else server.IMAGE_STRING_FOR_BFV,
                 self.flavor.name,
+                s.project_name,
+                s.user_name,
             )
             for s in self.servers
         )
@@ -4742,6 +4757,8 @@ class TestServerList(_TestServerList):
                 server.HostColumn(getattr(s, 'hypervisor_hostname')),
                 format_columns.DictColumn(s.metadata),
                 format_columns.DictListColumn(None),
+                s.project_name,
+                s.user_name,
             )
             for s in self.servers
         )
@@ -4775,6 +4792,8 @@ class TestServerList(_TestServerList):
                 self.image.name if s.image else server.IMAGE_STRING_FOR_BFV,
                 self.flavor.name,
                 s.project_id,
+                s.project_name,
+                s.user_name,
             )
             for s in self.servers
         )
@@ -4857,6 +4876,8 @@ class TestServerList(_TestServerList):
                 # Image will be an empty string if boot-from-volume
                 s.image['id'] if s.image else server.IMAGE_STRING_FOR_BFV,
                 s.flavor['id'],
+                s.project_name,
+                s.user_name,
             )
             for s in self.servers
         )
@@ -4888,6 +4909,8 @@ class TestServerList(_TestServerList):
                 # Image will be an empty string if boot-from-volume
                 s.image['id'] if s.image else server.IMAGE_STRING_FOR_BFV,
                 s.flavor['id'],
+                s.project_name,
+                s.user_name,
             )
             for s in self.servers
         )
@@ -5259,6 +5282,8 @@ class TestServerList(_TestServerList):
                 server.HostColumn(getattr(s, 'hypervisor_hostname')),
                 format_columns.DictColumn(s.metadata),
                 format_columns.DictListColumn(s.scheduler_hints),
+                s.project_name,
+                s.user_name,
             )
             for s in self.servers
         )
@@ -5296,7 +5321,11 @@ class TestServerList(_TestServerList):
         ]

         # Add the expected host_status column and data.
-        columns_long = self.columns_long + ('Host Status',)
+        # Insert Host Status before Project Name
+        columns_list = list(self.columns_long)
+        project_index = columns_list.index('Project Name')
+        columns_list.insert(project_index, 'Host Status')
+        columns_long = tuple(columns_list)
         self.data2 = tuple(
             (
                 s.id,
@@ -5316,6 +5345,8 @@ class TestServerList(_TestServerList):
                 format_columns.DictColumn(s.metadata),
                 format_columns.DictListColumn(s.scheduler_hints),
                 s.host_status,
+                s.project_name,
+                s.user_name,
             )
             for s in servers
         )
@@ -5337,6 +5368,8 @@ class TestServerListV273(_TestServerList):
         'Networks',
         'Image',
         'Flavor',
+        'Project Name',
+        'User Name',
     )
     columns_long = (
         'ID',
@@ -5353,6 +5386,8 @@ class TestServerListV273(_TestServerList):
         'Host',
         'Properties',
         'Scheduler Hints',
+        'Project Name',
+        'User Name',
     )

     def setUp(self):
@@ -5395,6 +5430,8 @@ class TestServerListV273(_TestServerList):
                 # Image will be an empty string if boot-from-volume
                 self.image.name if s.image else server.IMAGE_STRING_FOR_BFV,
                 self.flavor.name,
+                s.project_name,
+                s.user_name,
             )
             for s in self.servers
         )
@@ -5543,6 +5580,8 @@ class TestServerListV273(_TestServerList):
             server.AddressesColumn(None),
             '',
             '',
+            'N/A',
+            'N/A',
         )
         self.assertEqual(expected_row, partial_server)
```
### 출력 결과
