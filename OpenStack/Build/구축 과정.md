https://smsolutions.slab.com/public/posts/open-stack-%EC%8C%A9%EC%A7%9C-%EC%84%A4%EC%B9%98-part-04-1r4p3yac?shr=8zhpgj1f3a24pu31rsv6dbhc#hc9w0-4-12-reboot > 4.5 hostname 부터 설정
- Date : 2025-09-17 ~ 
### 구축 과정
[Controller]
- MariaDB 구동
	- mysql root passwd : vora
	![[Pasted image 20250917224520.png]]
- RabbitMQ 구동
	- user : openstack, pw: dkensxhflektm (아둔토리다스)
	![[Pasted image 20250917225012.png]]
- Memcached 실행
	![[Pasted image 20250917225329.png]]
- openstack 설치
1. Keystone 
	- 기초 DB 내용 생성 (Keystone DB를 Populate) 
		![[Pasted image 20250917230222.png|200]]
	- Nova, Glance, Cinder 등이 사용할 운영용 Project 생성
		![[Pasted image 20250917230940.png|400]]
	- 컨테이너 만들어볼 환경을 위한 Project 생성 : ongojishin
	- openstack을 사용할 때 쓰는 user 생성
		![[Pasted image 20250917231254.png|400]]
2. Glance
	![[Pasted image 20250917232522.png|400]]
	- endpoint
		![[Pasted image 20250917233632.png]]
	- 기초 DB 내용 생성 (Glance DB를 Populate)
		![[Pasted image 20250917233833.png|200]]
	- Glance-api 시작
		![[Pasted image 20250917234055.png]]
	- test - 이미지 다운받고 등록 잘 되는지 테스트 (성공)
		![[Pasted image 20250918013925.png]]		
3. Placement
	- DB 생성
		![[Pasted image 20250918174300.png|200]]
	Placement는 별도의 프로세스가 아니라, Apache2에 연동되어 구동하는 Apache의 Python module
4. Nova
	cell0 DB 생성 확인
	![[Pasted image 20250918203129.png]]
	[Compute] iscsid 기동
	![[Pasted image 20250918204317.png|500]]

5. Neutron
	[Compute]
	- ovs 시작 및 설정
		1. Compute Node의 OpenvSwitch가 Control Node를 바라보도록 설정
		2. Geneve 통신을 할 VTEP 인터페이스 IP를 넣어줌 (이번 실습에서는 Geneve 인터페이스가 없어서 MGMT IP 넣어줌)
		3. Provider 네트워크를 사용하기 위해 br-ex 생성/phynet1에 매칭/nic(enp6s18)을 br-ex와 연동
			> 여기서 "ssh 연결 끊기는 오류 발생"
			- **원인 : 브리지 생성과 NIC 연결 과정에서 기존 IP가 이동/사라짐** 
				- br-ex 브리지 생성하고 물리 NIC(enp6s18)를 브리지에 연결하는 순간, 해당 NIC에 설정된 IP가 브리지로 이동하게 됨
				- 만약 ssh 세션이 enp6s18의 기존 IP로 접속 중이었다면, 브리지를 만들면서 NIC의 IP가 사라지거나 변경되어 세션이 끊길 수 있다
				![[Pasted image 20250919201750.png]]
			- **해결 과정**
				1. 물리 NIC에서 IP 제거 : ip addr flush dev enp6s18
				2. 브리지에 IP 유지 : 
					- ip addr add 192.168.50.122/24 dev br-ex
					- ip link set br-ex up
				3. 브리지와 NIC 연결 확인 : brctl show br-ex 또는 ovs-vsctl show
					![[Pasted image 20250919204612.png|200]]
		4. openvswitch 및 다른 Agent들을 시작
		5. OVN-Controller가 OpenvSwitch와 통신할 수 있도록 OpenvSwitch의 로컬 포트를 엶
		[Controller]
		Compute Node가 잘 추가 되었는지 확인
		![[Pasted image 20250919211024.png|300]]

6. CInder
	- LVM 볼륨 기반의 iSCSI를 구성
		![[Pasted image 20250919215005.png|300]]
		> 추가 하드디스크 필요한 상황
		
	